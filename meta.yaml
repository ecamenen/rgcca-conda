{% set name = "r-rgcca" %}
{% set version = "3.0.0" %}
{% set r_version = "5" %}
{% set build = "005" %}

package:
    name: {{ name }}
    version: {{ version }}

source:
    git_rev: {{ version }}
    git_url: https://github.com/rgcca-factory/RGCCA.git
    git_depth: 1

#r_version:
#    - 6
#    - 5
#    - 4

build:
    noarch: generic
    number: {{ build }}
    rpaths:
        - lib/
        - lib/R/lib/
    string: r3{{ r_version }}_{{ build }}
    include_recipe: False
#    entry_points:
#        - rgcca = R

requirements:
    build:
        - _r-mutex
        - r-base=3.{{ r_version }}
        - r-gridextra
        - r-deriv
        - r-mass
        - r-ggplot2
        - r-optparse
        - r-scales
        - r-igraph
        - r-ggrepel
        - r-openxlsx
        - r-rlang
        - r-vegan
        - libgfortran
    run:
        - r-base=3.{{ r_version }}
        - r-gridextra
        - r-deriv
        - r-mass
        - r-ggplot2
        - r-optparse
        - r-scales
        - r-igraph
        - r-ggrepel
        - r-openxlsx
        - r-rlang
        - r-vegan

test:
    commands:
#        - rgcca -h
        - cd ${PREFIX} && ls && Rscript inst/launcher.R -h

#outputs:
#    - name: rgcca
#    files:
#        - R/

about:
    home: https://CRAN.R-project.org/package=RGCCA
    doc_url: https://github.com/rgcca-factory/RGCCA
    dev_url: https://github.com/rgcca-factory/RGCCA/blob/master/README.md
    license: GPL (>= 2)
    license_family: GPL3
    summary: 'Multiblock data analysis concerns the analysis of several sets of variables
        (blocks) observed on the same group of individuals. The main aims of the RGCCA
        package are: (i) to study the relationships between blocks and (ii) to identify
        subsets of variables of each block which are active in their relationships
        with the other blocks.'

extra:
    copy_test_source_files: true
    final: true
    recipe-maintainers:
        - ecamenen